<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Java Masterclass Challenge Index</title>
  
  <!-- Tailwind CSS for modern styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* Custom styles for a polished look */
    body {
      font-family: 'Inter', sans-serif;
      background-color: #111827; /* Dark background */
      color: #F9FAFB; /* Light text */
    }

    /* Custom scrollbar for a more integrated feel */
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #1F2937;
    }
    ::-webkit-scrollbar-thumb {
      background: #4B5563;
      border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #6B7280;
    }
    
    /* Simple fade-in animation for list items */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-in {
      animation: fadeIn 0.5s ease-out forwards;
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 bg-gray-900">

  <main class="w-full max-w-4xl mx-auto bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-2xl overflow-hidden border border-gray-700">
    <!-- Header Section -->
    <div class="p-6 md:p-8 border-b border-gray-700 text-center">
      <h1 class="text-3xl md:text-4xl font-bold text-white tracking-tight">Java Masterclass Challenges</h1>
      <p class="mt-2 text-gray-400">A curated list of solutions from the Tim Buchalka course.</p>
    </div>

    <!-- Search/Filter Section -->
    <div class="p-4 md:p-6 bg-gray-800/30">
        <div class="relative">
            <input type="text" id="search-input" placeholder="Filter challenges..." class="w-full pl-10 pr-4 py-3 bg-gray-900 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-300 text-white placeholder-gray-500">
            <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" />
            </svg>
        </div>
    </div>

    <!-- Folder List Section -->
    <div class="p-4 md:p-6 max-h-[60vh] overflow-y-auto">
      <ul id="folder-list" class="space-y-3">
        <!-- Loading state will be shown here -->
      </ul>
      <div id="no-results" class="text-center text-gray-400 py-8 hidden">
          <p>No challenges found matching your search.</p>
      </div>
    </div>

  </main>

  <script>
    // GitHub repository details
    const owner = "RazyAnas";
    const repo = "Java-Masterclass-Tim-Buchalka-Solutions";

    // DOM Elements
    const folderList = document.getElementById("folder-list");
    const searchInput = document.getElementById("search-input");
    const noResults = document.getElementById("no-results");

    // Store all fetched folders to avoid repeated API calls
    let allFolders = [];

    /**
     * Shows a loading indicator in the list.
     */
    function showLoading() {
      folderList.innerHTML = `
        <li class="text-center text-gray-400 py-8">
          <div class="flex justify-center items-center space-x-2">
            <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span>Fetching from GitHub...</span>
          </div>
        </li>`;
    }

    /**
     * Renders the list of folders.
     * @param {Array} folders - The array of folder items to display.
     */
    function renderFolders(folders) {
        folderList.innerHTML = ""; // Clear current list
        if (folders.length === 0) {
            noResults.classList.remove('hidden');
        } else {
            noResults.classList.add('hidden');
        }
        
        folders.forEach((item, index) => {
            const link = `https://github.com/${owner}/${repo}/tree/main/${encodeURIComponent(item.name)}`;
            const li = document.createElement("li");
            li.className = 'fade-in';
            li.style.animationDelay = `${index * 50}ms`; // Staggered animation
            
            li.innerHTML = `
                <a href="${link}" target="_blank" rel="noopener noreferrer" class="flex items-center justify-between p-4 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-all duration-300 group">
                    <div class="flex items-center space-x-4">
                        <svg class="h-6 w-6 text-blue-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                        </svg>
                        <span class="font-medium text-white group-hover:text-blue-300">${item.name.replace(/[-_]/g, ' ')}</span>
                    </div>
                    <svg class="h-5 w-5 text-gray-400 group-hover:text-white transition-transform duration-300 group-hover:translate-x-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                    </svg>
                </a>`;
            folderList.appendChild(li);
        });
    }

    /**
     * Fetches folders from the GitHub API and displays them.
     */
    async function fetchAndDisplayFolders() {
      showLoading();
      try {
        const response = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents`);
        if (!response.ok) {
            throw new Error(`GitHub API error: ${response.status}`);
        }
        const data = await response.json();
        
        allFolders = data
            .filter(item => item.type === "dir" && item.name.toLowerCase().startsWith("challenge"))
            .sort((a, b) => a.name.localeCompare(b.name)); // Sort alphabetically

        renderFolders(allFolders);

      } catch (error) {
        console.error("Failed to fetch folders:", error);
        folderList.innerHTML = `<li class="text-center text-red-400 py-8">Failed to load folder list. Please try again later.</li>`;
      }
    }

    /**
     * Filters the displayed folders based on search input.
     */
    function filterFolders() {
        const searchTerm = searchInput.value.toLowerCase();
        const filtered = allFolders.filter(folder => 
            folder.name.toLowerCase().includes(searchTerm)
        );
        renderFolders(filtered);
    }

    // Event Listeners
    searchInput.addEventListener('input', filterFolders);
    
    // Initial fetch
    fetchAndDisplayFolders();

  </script>
</body>
</html>
